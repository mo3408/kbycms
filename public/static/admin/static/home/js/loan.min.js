"use strict";!function(a,t){function e(a,t,e){var s;"business"===a?s=Number(n("#businessRate"))/100:"pfa"===a&&(s=v/100),console.log(s);var r,i,o,l,u,h,m,c=s/12,d=Number(n("#loanPeriod")),p={};return 0===e?(r=Math.pow(1+c,d),i=t*c*r/(r-1),o=i*d,l=o-t,p.payInterest=l,p.monthPay=i):1===e&&(u=t/d,h=u+(t-0)*c,l=(d+1)*t*c/2,m=u*c,p.payInterest=l,p.monthPayFirst=h,p.monthPayDecrease=m),p}function s(a,t){var e="元"===t?1:1e4;return isNaN(a)?"":(a/e).toFixed(2)}function n(a){var e,s=t(a);return e=s.is(":input")?s.val():s.length>1?s.filter(".on").data("value"):s.data("value")}var r=t("#buttonCal"),i=r.data("rateBusiness"),o=i,l=r.data("rateBusinessLessthan1"),u=r.data("rateBusinessRange1and5"),h=r.data("ratePfa"),v=h,m=r.data("ratePfaLessthan5"),c=t("#total"),d=t("#totalBusiness"),p=t("#totalPfa"),f=parseInt(c.val()*(1-Number(n("#firstPayPercent"))),10);t(".select").on("click",".unflod > a",function(){var a=t(this),e=a.attr("name"),s=a.data("value");a.parent().siblings('a[name="'+e+'"]').attr("data-value",s).data("value",s).html(a.html());var r=t("#businessRate");if("business-discount"===e){var c=Number(o*s).toFixed(2);r.val(c)}if("type"===e)switch(s){case"business":t("#tr-pfa").hide(),t("#tr-business").hide(),t("#tr-business-rate").show();break;case"pfa":t("#tr-pfa").hide(),t("#tr-business").hide(),t("#tr-business-rate").hide();break;case"mix":t("#tr-pfa").show(),t("#tr-business").show(),t("#tr-business-rate").show()}if("ltv"===e&&(d.val(""),p.val(""),f=parseInt(Number(n("#total"))*(1-s),10)),"loan-period"===e){var y=s/12;y<=1&&(o=l,v=m),y>1&&y<=5&&(o=u,v=m),y>5&&(o=i,v=h),r.val(Number(o*n("#businessDiscount")).toFixed(2))}}),t('[name="repay-method"]').on("click",function(){return t(this).addClass("on").siblings().removeClass("on"),!1});for(var y,b=t("#loanPeriod").siblings(".unflod"),P="",N=0;N<30;N++)y=N+1,P+='<a name="loan-period" data-value="'+12*y+'">'+y+"年（"+12*y+"期）</a>";b.html(P),t("#buttonCal").on("click",function(){var a,r,i,o,l,u,h=n("#loanType"),v=1e4*Number(n("#total")),m=Number(n("#firstPayPercent")),c=v*m,d=n('[name="repay-method"]');t(".bill").hide().eq(d).show();var p={business:"商贷",pfa:"公贷",mix:"组合贷"},f=p[h];o=v*(1-m),t("#houseTotal").html(v/1e4);var y=t("#firstPay"),b=t("#loanTotal"),P=t("#payInterest"),N=t("#monthPay"),g=t("#monthPayFirst"),F=t("#monthPayDecrease");b.html(s(o)+"万（"+f+"）"),y.html(s(c)),"business"===h||"pfa"===h?(a=e(h,o,d),P.html(s(a.payInterest)+"万（"+f+"）"),N.html(s(a.monthPay,"元")+"元（"+f+"）"),g.html(s(a.monthPayFirst,"元")+"元（"+f+"）"),F.html(s(a.monthPayDecrease,"元")+"元（"+f+"）"),console.log(a)):"mix"===h&&(l=1e4*Number(n("#totalBusiness")),u=1e4*Number(n("#totalPfa")),r=e("business",l,d),i=e("pfa",u,d),P.html(s(r.payInterest+i.payInterest)+"万（"+f+"）"),N.html(s(r.monthPay+i.monthPay,"元")+"元（"+f+"）"),g.html(s(r.monthPayFirst+i.monthPayFirst,"元")+"元（"+f+"）"),F.html(s(r.monthPayDecrease+i.monthPayDecrease,"元")+"元（"+f+"）"),console.log(r),console.log(i)),t("#result-panel").show(),t("#result-nothing").hide()});var g=c.val(),F=d.val(),w=p.val();c.on("keydown",function(){g=this.value}).on("input propertychange",function(){var a=this.value;a.length&&!/^\d+(\.{1}\d*)?$/.test(a)&&(this.value=g),f=parseInt(this.value*(1-Number(n("#firstPayPercent"))),10)}),d.on("keydown",function(){F=this.value}).on("input propertychange",function(){var a=this.value;a.length&&!/^\d+(\.{1}\d*)?$/.test(a)&&(this.value=F),a=parseFloat(a||0,10),a>f&&(this.value=f);var t=parseFloat(this.value||0,10)+parseFloat(p.val()||0,10);isNaN(t)||t==f||p.val(Math.max(f-this.value,0))}),p.on("keydown",function(){w=this.value}).on("input propertychange",function(){var a=this.value;a.length&&!/^\d+(\.{1}\d*)?$/.test(a)&&(this.value=w),a=parseFloat(a||0,10),this.value>f&&(this.value=f);var t=parseFloat(this.value||0,10)+parseFloat(d.val()||0,10);isNaN(t)||t==f||d.val(Math.max(f-this.value,0))})}(window,jQuery),$(function(){});
//# sourceMappingURL=loan.min.js.map
